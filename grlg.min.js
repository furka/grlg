!function(){"use strict";function a(a){for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a}function b(a){return a=parseFloat(a)||0,a=Math.max(0,a),a=Math.min(1,a)}function c(a,b,c,d){var e,f=[];d=parseInt(d,10)||Math.floor(4*Math.random());for(var g=0,h=k.length;h>g;g+=1)e=(g+d)%h,"undefined"==typeof a.get(b+k[e].x,c+k[e].y)&&f.push(e);return f}function d(a){return a._activeIndexes.splice(Math.floor(Math.random()*a._activeIndexes.length),1)[0]}function e(a){for(var b,d,e,f=a._history.length-1;f>=0;f-=1){if(e=a._history[f],b=e%a.width,d=Math.floor(e/a.width),b>0&&b<a.width-1&&d>0&&d<a.height-1&&c(a,b,d).length)return a._cells[e]=!0,a._activeIndexes.push(e),e;a._history.splice(f,0)}}function f(b,f,l,m,n){if(b.completed)return!1;var o=b.openCount<f,p=l&&b.openCount>=l;if(!b._activeIndexes.length){if(!o)return!1;if(!e(b))return!1}var q,r=d(b),s=r%b.width,t=Math.floor(r/b.width),u=b._propagationDirections[r];Math.random()>n&&(u=void 0);var v,w=c(b,s,t,u);for(g(w,b,s,t),o&&(void 0===w[0]&&(w=a(w)),h(w,b,s,t)),w=a(w),q=w.length-1;q>=0;q-=1)void 0!==w[q]&&(v=k[w[q]],!p&&Math.random()<=m?i(b,v.x+s,v.y+t,w[q]):j(b,v.x+s,v.y+t,w[q]));return!0}function g(a,b,c,d){for(var e,f=a.length-1;f>=0;f-=1)e=k[a[f]],(e.x+c<=0||e.x+c>=b.width-1||e.y+d<=0||e.y+d>=b.height-1)&&(j(b,e.x+c,e.y+d,a[f]),a[f]=void 0)}function h(a,b,c,d){for(var e,f=0;f<a.length;f+=1)if(void 0!==a[f])return e=k[a[f]],i(b,e.x+c,e.y+d,a[f]),void(a[f]=void 0)}function i(a,b,c,d){a.openCount+=1;var e=b+c*a.width;return a._cells[e]=!0,a._propagationDirections[e]=d,a._activeIndexes.push(e),a.last=e,e}function j(a,b,c,d){var e=b+c*a.width;return a._cells[e]=!1,a._propagationDirections[e]=d,a._history.push(e),e}var k=[{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:-1,y:0}],l={max:void 0,min:20,speed:1,linearity:0,density:0},m=function(a,b){a=Math.floor(a||0),b=Math.floor(b||0),this.width=a,this.height=b,this._cells=[],this._history=[],this._activeIndexes=[],this._propagationDirections=[],this.settings={};for(var c in l)this.settings[c]=l[c];this.openCount=0,this.first=i(this,Math.floor(this.width/2),Math.floor(this.height/2))};if(m.prototype.get=function(a,b){return a=Math.floor(a),b=Math.floor(b),this._cells[a+b*this.width]},m.prototype.getStart=function(){return{x:this.first%this.width,y:Math.floor(this.first/this.height)}},m.prototype.getEnd=function(){return{x:this.last%this.width,y:Math.floor(this.last/this.height)}},m.prototype.generate=function(){for(var a=0;a<this.settings.speed&&!this.completed;a+=1)this.completed=!f(this,this.settings.min,this.settings.max,this.settings.density,this.settings.linearity);this.completed&&(delete this._history,delete this._propagationDirections,delete this._activeIndexes)},m.prototype.generateAll=function(a,b){this.generate(),"function"==typeof b&&b(this),this.completed?"function"==typeof a&&a(this):setTimeout(this.generateAll.bind(this,a,b),10)},m.prototype.configure=function(a){if("object"==typeof a){for(var c in this.settings)this.settings[c]=a[c]||this.settings[c];this.settings.density=b(this.settings.density),this.settings.linearity=b(this.settings.linearity),this.settings.speed=Math.max(1,parseInt(this.settings.speed,10)||1),this.settings.min=Math.max(0,parseInt(this.settings.min,10)||0),this.settings.max=Math.max(this.settings.min,parseInt(this.settings.max,10))||void 0}},m.prototype.config=m.prototype.configure,m.prototype.print=function(a,b){b=b||document.createElement("canvas");var c,d,e=b.getContext("2d");a=a||5,b.width=this.width*a,b.height=this.height*a,e.strokeStyle="rgba(200,200,200,1)";for(var f=0;f<this._cells.length;f+=1)"undefined"!=typeof this._cells[f]&&(c=f%this.width,d=Math.floor(f/this.width),f===this.first?e.fillStyle="rgba(0,255,255,1)":f===this.last?e.fillStyle="rgba(255,0,255,1)":this._cells[f]?e.fillStyle="rgba(255,255,255,1)":e.fillStyle="rgba(50,50,50,1)",e.fillRect(c*a,d*a,a,a),a>3&&e.strokeRect(c*a+.5,d*a+.5,a,a));return b},"undefined"!=typeof module&&module.exports)module.exports=m;else if("function"==typeof define&&define.amd)define("grlg",[],function(){return m});else{var n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;n.GRLG=m}}();